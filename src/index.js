"use strict";
exports.__esModule = true;
var search_form_js_1 = require("./search-form.js");
var search_results_js_1 = require("./search-results.js");
var user_js_1 = require("./user.js");
var lib_js_1 = require("./lib.js");
var user = {
    userName: 'Wade Warren',
    avatarUrl: '/img/avatar.png'
};
// //заводим данные в localStorage
function setItemUser(key, value) {
    try {
        return window.localStorage.setItem(key, value);
    }
    catch (e) {
        console.log(e);
    }
}
function setItemFavorites(key, value) {
    try {
        return window.localStorage.setItem(key, value);
    }
    catch (e) {
        console.log(e);
    }
}
setItemUser('user', JSON.stringify(user));
setItemFavorites('favoritesAmount', '3');
// //получаем данные из localStorage
function getItemUser(key) {
    try {
        return window.localStorage.getItem(key);
    }
    catch (e) {
        console.log(e);
    }
}
function getUserData() {
    try {
        var json = getItemUser('user');
        var user_1 = JSON.parse(json);
        return user_1;
    }
    catch (e) {
        console.error(e);
    }
}
function getFavoritesAmount(key) {
    try {
        return parseInt(window.localStorage.getItem(key));
    }
    catch (e) {
        console.log(e);
    }
}
window.addEventListener('DOMContentLoaded', function () {
    var _a = getUserData(), userName = _a.userName, avatarUrl = _a.avatarUrl;
    (0, user_js_1.renderUserBlock)(userName, avatarUrl, getFavoritesAmount('favoritesAmount'));
    (0, search_form_js_1.renderSearchFormBlock)();
    (0, search_results_js_1.renderSearchStubBlock)();
    (0, lib_js_1.renderToast)({ text: 'Это пример уведомления. Используйте его при необходимости', type: 'success' }, { name: 'Понял', handler: function () { console.log('Уведомление закрыто'); } });
    getDateChange();
    (0, search_form_js_1.getSearch)();
});
function getDateChange() {
    var checkInInput = document.querySelector('#check-in-date');
    var checkOutInput = document.querySelector('#check-out-date');
    checkInInput.addEventListener('input', function (event) {
        event.preventDefault();
        var checkOutDate = (0, search_form_js_1.getPlusTwoDays)(new Date(checkInInput.value));
        checkOutInput.value = (0, search_form_js_1.getDateString)(checkOutDate);
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLG1EQUFpRztBQUNqRyx5REFBNEQ7QUFDNUQscUNBQTRDO0FBQzVDLG1DQUF1QztBQUl2QyxJQUFNLElBQUksR0FBRztJQUNYLFFBQVEsRUFBRSxhQUFhO0lBQ3ZCLFNBQVMsRUFBRSxpQkFBaUI7Q0FDN0IsQ0FBQztBQUVGLGtDQUFrQztBQUNsQyxTQUFTLFdBQVcsQ0FBQyxHQUFHLEVBQUUsS0FBSztJQUM3QixJQUFJO1FBQ0YsT0FBTyxNQUFNLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUE7S0FDL0M7SUFBQyxPQUFPLENBQUMsRUFBRTtRQUNWLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7S0FDZjtBQUNILENBQUM7QUFDRCxTQUFTLGdCQUFnQixDQUFDLEdBQUcsRUFBRSxLQUFLO0lBQ2xDLElBQUk7UUFDRixPQUFPLE1BQU0sQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQTtLQUMvQztJQUFDLE9BQU8sQ0FBQyxFQUFFO1FBQ1YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtLQUNmO0FBQ0gsQ0FBQztBQUNELFdBQVcsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQzFDLGdCQUFnQixDQUFDLGlCQUFpQixFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBRXpDLG9DQUFvQztBQUNwQyxTQUFTLFdBQVcsQ0FBQyxHQUFHO0lBQ3RCLElBQUk7UUFDRixPQUFPLE1BQU0sQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBWSxDQUFDO0tBQ3BEO0lBQUMsT0FBTyxDQUFDLEVBQUU7UUFDVixPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO0tBQ2Y7QUFDSCxDQUFDO0FBRUQsU0FBUyxXQUFXO0lBQ2xCLElBQUk7UUFDRixJQUFNLElBQUksR0FBRyxXQUFXLENBQUMsTUFBTSxDQUFzQixDQUFDO1FBQ3RELElBQU0sTUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDOUIsT0FBTyxNQUFJLENBQUM7S0FDYjtJQUFDLE9BQU8sQ0FBQyxFQUFFO1FBQ1YsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQTtLQUNqQjtBQUNILENBQUM7QUFFRCxTQUFTLGtCQUFrQixDQUFDLEdBQUc7SUFDN0IsSUFBSTtRQUNGLE9BQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFzQixDQUFDO0tBQ3hFO0lBQUMsT0FBTyxDQUFDLEVBQUU7UUFDVixPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO0tBQ2Y7QUFDSCxDQUFDO0FBRUQsTUFBTSxDQUFDLGdCQUFnQixDQUFDLGtCQUFrQixFQUFFO0lBQ3BDLElBQUEsS0FBMEIsV0FBVyxFQUFFLEVBQXJDLFFBQVEsY0FBQSxFQUFFLFNBQVMsZUFBa0IsQ0FBQztJQUM5QyxJQUFBLHlCQUFlLEVBQUMsUUFBUSxFQUFFLFNBQVMsRUFBRSxrQkFBa0IsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUM7SUFDNUUsSUFBQSxzQ0FBcUIsR0FBRSxDQUFDO0lBQ3hCLElBQUEseUNBQXFCLEdBQUUsQ0FBQztJQUN4QixJQUFBLG9CQUFXLEVBQ1QsRUFBQyxJQUFJLEVBQUUsMkRBQTJELEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBQyxFQUNwRixFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLGNBQU8sT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFBLENBQUEsQ0FBQyxFQUFDLENBQ3JFLENBQUM7SUFDRixhQUFhLEVBQUUsQ0FBQztJQUNoQixJQUFBLDBCQUFTLEdBQUUsQ0FBQztBQUNkLENBQUMsQ0FBQyxDQUFDO0FBRUgsU0FBUyxhQUFhO0lBQ3BCLElBQU0sWUFBWSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQXFCLENBQUM7SUFDbEYsSUFBTSxhQUFhLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxpQkFBaUIsQ0FBcUIsQ0FBQztJQUNwRixZQUFZLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFDLFVBQUMsS0FBSztRQUMxQyxLQUFLLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDdkIsSUFBTSxZQUFZLEdBQUcsSUFBQSwrQkFBYyxFQUFDLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFBO1FBQ2pFLGFBQWEsQ0FBQyxLQUFLLEdBQUcsSUFBQSw4QkFBYSxFQUFDLFlBQVksQ0FBQyxDQUFBO0lBQ25ELENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Z2V0U2VhcmNoLCBnZXREYXRlU3RyaW5nLCBnZXRQbHVzVHdvRGF5cywgcmVuZGVyU2VhcmNoRm9ybUJsb2NrfSBmcm9tICcuL3NlYXJjaC1mb3JtLmpzJztcbmltcG9ydCB7IHJlbmRlclNlYXJjaFN0dWJCbG9jayB9IGZyb20gJy4vc2VhcmNoLXJlc3VsdHMuanMnO1xuaW1wb3J0IHsgcmVuZGVyVXNlckJsb2NrIH0gZnJvbSAnLi91c2VyLmpzJztcbmltcG9ydCB7IHJlbmRlclRvYXN0IH0gZnJvbSAnLi9saWIuanMnO1xuXG50eXBlIFVzZXIgPSB7dXNlck5hbWU6IHN0cmluZywgYXZhdGFyVXJsOiBzdHJpbmd9O1xuXG5jb25zdCB1c2VyID0ge1xuICB1c2VyTmFtZTogJ1dhZGUgV2FycmVuJyxcbiAgYXZhdGFyVXJsOiAnL2ltZy9hdmF0YXIucG5nJ1xufTtcblxuLy8gLy/Qt9Cw0LLQvtC00LjQvCDQtNCw0L3QvdGL0LUg0LIgbG9jYWxTdG9yYWdlXG5mdW5jdGlvbiBzZXRJdGVtVXNlcihrZXksIHZhbHVlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSlcbiAgfVxufVxuZnVuY3Rpb24gc2V0SXRlbUZhdm9yaXRlcyhrZXksIHZhbHVlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSlcbiAgfVxufVxuc2V0SXRlbVVzZXIoJ3VzZXInLCBKU09OLnN0cmluZ2lmeSh1c2VyKSk7XG5zZXRJdGVtRmF2b3JpdGVzKCdmYXZvcml0ZXNBbW91bnQnLCAnMycpO1xuXG4vLyAvL9C/0L7Qu9GD0YfQsNC10Lwg0LTQsNC90L3Ri9C1INC40LcgbG9jYWxTdG9yYWdlXG5mdW5jdGlvbiBnZXRJdGVtVXNlcihrZXkpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkgYXMgdW5rbm93bjtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUpXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0VXNlckRhdGEoKTogVXNlciB8IG51bGwge1xuICB0cnkge1xuICAgIGNvbnN0IGpzb24gPSBnZXRJdGVtVXNlcigndXNlcicpIGFzIHVua25vd24gYXMgc3RyaW5nO1xuICAgIGNvbnN0IHVzZXIgPSBKU09OLnBhcnNlKGpzb24pO1xuICAgIHJldHVybiB1c2VyO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcihlKVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldEZhdm9yaXRlc0Ftb3VudChrZXkpOiBudW1iZXIge1xuICB0cnkge1xuICAgIHJldHVybiBwYXJzZUludCh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSkgYXMgdW5rbm93biBhcyBudW1iZXI7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlKVxuICB9XG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICBjb25zdCB7IHVzZXJOYW1lLCBhdmF0YXJVcmwgfSA9IGdldFVzZXJEYXRhKCk7XG4gIHJlbmRlclVzZXJCbG9jayh1c2VyTmFtZSwgYXZhdGFyVXJsLCBnZXRGYXZvcml0ZXNBbW91bnQoJ2Zhdm9yaXRlc0Ftb3VudCcpKTtcbiAgcmVuZGVyU2VhcmNoRm9ybUJsb2NrKCk7XG4gIHJlbmRlclNlYXJjaFN0dWJCbG9jaygpO1xuICByZW5kZXJUb2FzdChcbiAgICB7dGV4dDogJ9Ct0YLQviDQv9GA0LjQvNC10YAg0YPQstC10LTQvtC80LvQtdC90LjRjy4g0JjRgdC/0L7Qu9GM0LfRg9C50YLQtSDQtdCz0L4g0L/RgNC4INC90LXQvtCx0YXQvtC00LjQvNC+0YHRgtC4JywgdHlwZTogJ3N1Y2Nlc3MnfSxcbiAgICB7bmFtZTogJ9Cf0L7QvdGP0LsnLCBoYW5kbGVyOiAoKSA9PiB7Y29uc29sZS5sb2coJ9Cj0LLQtdC00L7QvNC70LXQvdC40LUg0LfQsNC60YDRi9GC0L4nKX19XG4gICk7XG4gIGdldERhdGVDaGFuZ2UoKTtcbiAgZ2V0U2VhcmNoKCk7XG59KTtcblxuZnVuY3Rpb24gZ2V0RGF0ZUNoYW5nZSgpIHtcbiAgY29uc3QgY2hlY2tJbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NoZWNrLWluLWRhdGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICBjb25zdCBjaGVja091dElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NoZWNrLW91dC1kYXRlJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgY2hlY2tJbklucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywoZXZlbnQpID0+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGNoZWNrT3V0RGF0ZSA9IGdldFBsdXNUd29EYXlzKG5ldyBEYXRlKGNoZWNrSW5JbnB1dC52YWx1ZSkpXG4gICAgY2hlY2tPdXRJbnB1dC52YWx1ZSA9IGdldERhdGVTdHJpbmcoY2hlY2tPdXREYXRlKVxuICB9KVxufVxuIl19